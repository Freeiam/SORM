30/03/2012 - Доработка протоколирования работы оператора: код 32 изменен на 93h;
18/05/2012 - Исправление ошибки при выдачи тестовых команд СОРМ, старшие разряды счетчика не обнулялись;
19/06/2012 - Исправленна ошибка при сборе мультипрефиксной конфигурации: некорректно формировался указатель
для очистки места под конфигурацию блока, запись конфигурации линии блока осуществлялась без учета типа блока.
Также доработан просмотр конфигурации АТС.
19/09/2012 - Из кода убранна вся отладочная печать. Реализованны средства проверки каналов ПУМы: тарификационный и канал ЦТО, 
а также работы режима конфигурации: прием/передача секторов данных. Удаленна некорректная посылка системного времени ЦК(МО135)
29/11/2012 - Исправлен просмотр ошибочных пакетов: информация теперь выводится не от начала пакета, а от ошибочной команды в пакете.
15/12/2012 - Переписан обработчик команды МО 133 для коректной работы процедуры сбора конфигурации,
исправлен процесс выделения памяти под конф. линии(МО125, МО235/211). 
09/01/2013 - Поставлена заглушка для команды МО16, был разрыв МО от ЦК0 в ст.Динской.
17/06/2013 - Исправлены замечания РОстовского УФСБ от 06.07.2012(с учетом замечаний сертификации на ноябрь 2012г.).svn-1115
18/06/2013 - Формирование дополнительных пар-ов в несост. соед., в случае, "белого списка".
27/06/2013 - В файле CIKL.INC добавлено обнуление счетчика ЕСХ для последующего корректного 
использования его в строковых командах с повторением REP и префиксом переопределения размера 
адреса 67h
01/07/2013 - Добавлено логирование команд СОРМ для "старого" железа(С101).
22/08/2013 - Реализован сброс пар-ов режима конф. при очередном запросе управления блоком.
02/06/2015 - MVT сделана версия 6.01.F0602h, в которую внесены следующие изменения:
             1. Исправлено отображение второй колонки данных контроля сбора конфигурации по Alt-C.
             2. При получении МО 235.214 и 235.215 в однопрефиксном режиме (когда оператор 
             редактирует данные на ЦК) данные корректно записываются в конфигурацию SEG_KONF,
             с учётом того, что данные по линии всегда имеют размер 16 байт.
             3. В процедуре обработки 235.214 и 235.215 Get_Line_Cfg данные по ДВО (9-й байт
             конфигурации) теперь инициализируются корректно (будем надеяться), а также 
             больше не зачищаются при получении некорректной информации об УПАТС.
             4. Исправлена процедура DVO_SR, запускающаяся при приёме команды 235.150. Она
             выполняется при назначении или отмене ДВО с клавиатуры телефона. Она теперь корректно
             обрабатывает размер линии в конфигурации для многопрефиксного режима.
19/06/2015 - MVT сделана версия 6.01.F0619a, внесены следующие изменения:
             1. Исправлен макрос @_Clear_tcop_dig, который мог вызвать прерывание с кодом 0
             из-за того, что результат деления не помещался в регистр al. Также введено ограничение 
             по числу сессий.
             2. Исправлена процедура Disconnect, которая запускала макрос @_Clear_tcop_dig 
             не для тех ТСОП, которые надо зачищать, и не запускала для тех, для которых надо.
20.07.2015 - MVT сделал новую версию v.6.01.F0720a.
             Теперь используется новый rbf, который используется для работы с 2VSK, имеет
             дату 18.11.08 или 3.02.09.
             1. В новой версии достигнута более надёжная работа с ФАПЧ с новым rbf на МСП-М.
                Для этого используется новая версия pllasm от 30.09.14, которая корректно берёт фазу
                фазу ФАПЧ из регистра 608h (начальный адрес регистра грузится при инициализации 
                устройств PCI_4). 
             2. В новой версии достигнута более надёжная работа с МО с новым rbf на МСП-М.
                Для этого:
                1) Изменена величина таймаута модема MO_TOUT с 500 * 3 на 500 * 2
                2) В в файле MO\MO.inc ветке кода для МСПМ в шести местах условной компиляции, 
                где сделан жёсткий выбор для записи в ОЗУ модема с позиции MO_OUT + 0fh и 
                минимальная длина пакета 0fh, сделан противоположный жёсткий выбор для записи 
                с начальной позиции MO_OUT и реальную длину пакета.
                3) Исправлена ошибка занесения длины передаваемого пакета в [MO_LEN] из регистра dl
                в месте с меткой Pack_Last - в этом месте происходит передача всех пакетов, кроме
                стандартных инициализационных и пустых.
             4. Реализована работа с MII при новом rbf.
                Для этого в программу перенесены изменения, реализующие автовыбор кодировки, сделаные 
                в версии MSPM MTP, а именно, изменения в процедуре MO_PROC, запись кодировки в ОЗУ 
                кодировки в фазе 6, сохранение отметки времени в процессе выбора кодировки при 
                переходе к следующей команде МО.
             5. Исправлена ошибка в макросе @PEREH_ZR, которая портила исполняемый код в момент
                выполнения, а именно, закоменнтирована ошибочная строка 
                MOV BYTE PTR ES:[RG_REG_KOMM],0
             6. В программу добавлены возможности для отладки.
             Замечания.
             В новой программе "МОДЕМ ФАПЧ" может в течение полуминуты оставаться в состоянии "НВП", 
             при этом работа с ФАПЧ происходит.
             После внесённых изменений программа не работает со старым rbf для TSORM, 
             не устанавливая МО ни в режиме HDB3, ни в режиме MII. При этом не работает и ФАПЧ.
15.09.2015 - MVT сделал версию v.6.01.JF0915a 
             1. Внесены изменения в установление связи по протоколу ПУМА при работе по СОМ-порту. 
             Поскольку Дополнительный пульт после установления связи и посылки пакетов NULL обычно 
             шлёт неуместный пакет RTW, то при подключеннии Дополнительным пультом получаются разрывы 
             связи и связь устанавливается долго. Новая программа переходит из состояния "Готов" 
             в состояние "Работа" только по получении пакета INFO, а пакеты NULL в состоянии "Готов" 
             сбрасывают отсчёт времени пребывания в этом состоянии, чтобы избежать разрыва связи 
             по таймауту. Это делается только при установлении связи по ПУМЕ по СОМ-порту, что 
             определяется по полю pt_type структуры поддержки одного транспортного канала ПУМА 
             PUMA_Trans_Struc. В результате, установление связи с Доппультом происходит теперь 
             мгновенно.
             2. Добавлены возможности по отладке в файл (см. "Инструкцию по работе с 
             лог-файлами.txt"). С использованием этих возможностей по отладке добавлены 
             возможности по отладке протокола ПУМа.
             Осталась проблема: при подключении блока к ЦК по HDB3 или при перезагрузке ЦК, к 
             которому подключён ТСОРМ, при условии подключения по HDB3, требуется перезагрузка
             блока ТСОРМ, в противном случае идёт устойчивое НВП.
30.10.2015 - MVT сделал версию v.6.01.JF1030a
             Исправлена ситуация, когда после работы по MII ЦК, к которому подключён блок ТСОРМ,
             переходил на HDB3, либо перезагружался при работе по HDB3, и при этом для установления
             МО в работу было необходимо перезагружать блок ТСОРМ. Теперь МО устанавливается в
             работу самостоятельно. Для исправления в блоке кода с меткой MO_Init_1 команда:
             and     MO_RM, 0f7h
             заменена на:
             and     MO_RM, 077h
             то есть, старший бит (выбор HDB3-MII) теперь сбрасывается. Тогда он устанавливается 
             следующей командой:
             or      MO_RM, al
             в проверяемое значение типа протокола, в то время как до этого он оставался всегда на
             старом значении, и если это было 1, т.е. MII, то оно не менялось.
09.11.2015 - MVT сделал версию JF1109a, в которой исправлено:
             1. Процедура PUT_DIGITS - она портила ck_b из-за неверной границы цикла
             2. Обработка 112 команды: найдено PAUL, что work_b проверяется неверно
             3. Добавлена компиляция всех вариантов компиляции all.bat. Исполняемые файлы формируются
             в подпапках подпапки EXECUTABLE.
04.12.2015 - MVT сделал версию JF1204a, в которой добавил очистку отладочного файла по Alt-D.
             Документация перенесена в папку DOCUM.

23/10/17 - Краснодар.СОРМ. Сделаны изменения в Х.25 для решения проблем с подключением потока Е1 к концентратору-конвертору
	   CISCO-Искрател. В файле X_25_3N.inc изменена команда "Выдача подтверждения рестарта": вместо отсылки слова 00FFh, 
	   отправляется байт 0FFh. Также при компиляции для старого железа необходимо учитывать параметр _SORM_MONO(FALSE).
	   Есть еще отличия для старого железа: в файле Hw_c101c.inc в месте индикации контроля ошибок на новом ИКМ
	   убрана условная компиляция от объединеной версии и вставлена часть для "черного" железа, а также изменена коммутация
	   в ИКМ(Macr_sor.inc) - одно DD, тогда как на МСП коммутация осуществляется двумя DD. Если не ставятся на контроль номера 
	   спецслужб,то необходимо подправить конфигурацию блока: байт 1715h должен быть равен 00h, либо быть больше 3.
	   Версия для "черного" железа J111017e, версия для МСП - J111023a, верси для МСП-М - D0822a(после 01 нет точки).

































